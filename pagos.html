<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Pagos - Strokbig</title>
    <link rel="stylesheet" href="Styles/Menu.css">
    <link rel="stylesheet" href="Styles/pagos.css">
    <link rel="shortcut icon" href="assets/new/STROKBIG-ISOTIPO-BLANCO.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font/css/materialdesignicons.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <header id="header">
      <nav class="navbar" id="navbar">
        <div class="logo" aria-hidden="false">
          <a href="index.html">
            <img src="assets/new/STROKBIG-ISOTIPO-VANILLA.png" alt="STB siglas" class="logo--siglas">
            <img src="assets/new/Strokbig-Logo-Vanilla-[NO-MR].png" alt="Strokbig nombre completo" class="logo--full">
          </a>
        </div>
        <ul class="nav-links" id="nav-menu">
          <li><a href="index.html">INICIO</a></li>
          <li><a href="ETH.html">SERVICIOS</a></li>
          <li><a href="pagos.html">PAGOS EN LÍNEA</a></li>
          <li><a href="reportes.html">REPORTES</a></li>
          <li><a href="#">NOSOTROS</a></li>
          <li><a href="#">CLIENTES</a></li>
          <li><a href="#">CONTACTO</a></li>
          <li class="nav-links__cta-mobile"><a href="#" class="cta">Iniciar Sesión</a></li>
        </ul>
        <a href="#" class="cta cta-desktop">Iniciar Sesión</a>
        <button class="hamburger-btn" id="hamburger-btn" aria-label="Abrir menú" aria-expanded="false">
          <span></span><span></span><span></span>
        </button>
      </nav>
    </header>

    <div class="overlay" id="overlay"></div>

    <img id="logo-for-pdf" src="assets/StrokbigNombrecompleto.png" alt="Logo Strokbig" style="display: none;" />


    <main class="payment-main">
        <section id="pagos-en-linea" class="section-padding">
            <div class="payment-container container">
                <h2 class="section-title">Portal de Pagos</h2>
                
                <div class="payment-steps">
                    <div class="step-item active" id="step-indicator-1">
                        <div class="step-icon"><i class="mdi mdi-account-box-outline"></i></div>
                        <span>Ingresa tu ID</span>
                    </div>
                    <div class="step-item" id="step-indicator-2">
                        <div class="step-icon"><i class="mdi mdi-credit-card-scan-outline"></i></div>
                        <span>Selecciona y paga</span>
                    </div>
                    <div class="step-item" id="step-indicator-3">
                        <div class="step-icon"><i class="mdi mdi-receipt-text-check-outline"></i></div>
                        <span>Recibe tu comprobante</span>
                    </div>
                </div>

                <div class="payment-card active" id="payment-step-1">
                    <h3>Bienvenido al portal de pagos de Strokbig</h3>
                    <label for="document-number">Ingresa tu número de documento O referencia de pago <span class="required-asterisk">*</span></label>
                    <input type="text" id="document-number" placeholder="Número de identificación o Factura ID (ej: SB-MA01)">
                    <p class="input-description">Requerimos tus datos para validar tu identidad y gestionar tu pago.</p>
                    <button class="btn btn-primary" id="btn-next-step-1">Siguiente <i class="mdi mdi-check"></i></button>
                    <p id="id-error" class="error-message" style="display: none;">Por favor, ingresa un número de identificación o referencia válido.</p>
                </div>

                <div class="payment-card hidden" id="payment-step-2">
                    <h3 id="payment-step-2-greeting">Hola Usuario,</h3>
                    
                    <div id="invoice-selector-container" style="display: none;">
                        <div class="select-all-container" style="display: none;">
                            <input type="checkbox" id="select-all-invoices">
                            <label for="select-all-invoices">Seleccionar Todas las Cuotas</label>
                        </div>
                        <p>Selecciona la(s) factura(s) o cuota(s) que deseas pagar:</p>
                        <div id="invoice-options-list"> 
                            </div>
                        <p id="late-fee-notice" class="late-fee-notice" style="display: none;">
                            <i class="mdi mdi-alert-circle-outline"></i>
                            Recuerda que superar la fecha límite de pago genera intereses de mora.
                        </p>
                    </div>

                    <div id="payment-summary-container" class="hidden"> 
                        <div class="total-summary">
                            <h4>Resumen de Pago</h4>
                            <div class="summary-item">
                                <span>Cuota(s) Seleccionada(s):</span>
                                <span id="selected-invoices-count">0</span>
                            </div>
                            <div class="summary-item">
                                <span>Subtotal Base:</span>
                                <span id="selected-base-amount">$ 0</span>
                            </div>
                            <div class="summary-item penalty-details-summary hidden">
                                <span>Tasa Interés Aplicada (Diaria):</span>
                                <span id="interest-rate-details"></span>
                            </div>
                            <div class="summary-item penalty-details-summary hidden">
                                <span>Total Mora Calculada:</span>
                                <strong id="selected-penalty-amount">$ 0</strong>
                            </div>
                            <div class="summary-item total-summary-final">
                                <span>Total a Pagar:</span>
                                <strong id="selected-total-amount">$ 0</strong>
                            </div>
                        </div>
                       
                       <button class="btn btn-secondary download-btn hidden" id="download-invoice-btn">
                           <i class="mdi mdi-download-outline"></i> Descargar Detalle
                       </button>

                        <div class="payment-options">
                            <h4>Selecciona el valor a pagar:</h4>
                            <div class="radio-option">
                                <input type="radio" id="pago-total-seleccionado" name="payment-amount" value="total" checked>
                                <label for="pago-total-seleccionado">Pagar Total Seleccionado (<span id="total-selected-amount-label">$ 0</span>)</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="pago-parcial" name="payment-amount" value="partial">
                                <label for="pago-parcial">Otro Valor</label>
                                <input type="number" id="partial-amount-input" placeholder="COP" disabled>
                            </div>
                        </div>
                        <div class="payment-buttons">
                            <button class="btn btn-primary btn-pay" data-method="PSE"><i class="mdi mdi-bank"></i> Pagar con PSE</button>
                            <button class="btn btn-primary btn-pay" data-method="Bancolombia"><i class="mdi mdi-credit-card"></i> Pagar con Bancolombia</button>
                        </div>
                    </div> 
                    
                    <div id="no-pending-payments-container" class="hidden">
                        <i class="mdi mdi-check-circle-outline"></i>
                        <h3>¡Felicidades, estás al día!</h3>
                        <p>No tienes pagos pendientes en este momento.</p>
                    </div>

                    <a href="#" id="cancel-payment" class="cancel-link">Volver</a>
                </div>

                <div class="payment-card hidden" id="payment-step-3">
                    <h3><i class="mdi mdi-check-decagram"></i> ¡Pago Exitoso!</h3>
                    <p>Gracias por tu pago. Aquí tienes los detalles de tu transacción:</p>
                    <div class="receipt-details">
                        <div class="receipt-item"><span>Factura(s)/Cuota(s) pagada(s):</span> <strong id="receipt-invoices"></strong></div>
                        <div class="receipt-item"><span>Valor pagado:</span> <strong id="receipt-amount"></strong></div>
                        <div class="receipt-item"><span>Método de pago:</span> <span id="receipt-method"></span></div>
                        <div class="receipt-item"><span>Fecha de pago:</span> <span id="receipt-date"></span></div>
                        <div class="receipt-item"><span>Referencia:</span> <span id="receipt-ref"></span></div>
                    </div>
                    <button class="btn btn-secondary download-btn" id="download-receipt-btn">
                         <i class="mdi mdi-download-outline"></i> Descargar Recibo
                    </button>
                    <button class="btn btn-secondary" id="btn-finish-payment" style="margin-top: 15px;">Finalizar</button>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
      <div class="footer-container">
        <div class="footer-top">
          <div class="footer-about">
            <img src="assets/new/Strokbig-Logo-Vanilla-[NO-MR].png" alt="Logo Strokbig" class="footer-logo">
            <p class="footer-description">
              Soluciones tecnológicas innovadoras para la gestión académica y el desarrollo empresarial.
            </p>
          </div>
          <div class="footer-column footer-social">
          <h3>Síguenos en Redes</h3>
            <ul class="social-icons">
              <li><a href="https://www.facebook.com/profile.php?id=61581199993425" aria-label="Visita nuestro Facebook" target="_blank"><i class="mdi mdi-facebook"></i></a></li>
              <li><a href="https://www.instagram.com/strokbig_sistemas/?utm_source=ig_web_button_share_sheet" aria-label="Visita nuestro Instagram" target="_blank"><i class="mdi mdi-instagram"></i></a></li>
              <li><a href="https://g.page/r/CSzTqpvqDcYNEBI/review" aria-label="Encuéntranos en Google Maps" target="_blank"><i class="mdi mdi-google-maps"></i></a></li>
            </ul>
          </div>
        </div>
        <div class="footer-links">
          <div class="footer-column">
            <h3>Navegación</h3>
            <ul>
              <li><a href="index.html">Inicio</a></li>
              <li><a href="ETH.html">Servicios</a></li>
              <li><a href="#">Nosotros</a></li>
              <li><a href="#">Clientes</a></li>
              <li><a href="#">Contacto</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Soporte</h3>
            <ul>
              <li><a href="#">Centro de Ayuda</a></li>
              <li><a href="#">Preguntas Frecuentes</a></li>
              <li><a href="#">Reportar un Problema</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Legal</h3>
            <ul>
              <li><a href="T&C.html">Términos y Condiciones</a></li>
              <li><a href="PTD.html">Política de Privacidad</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Contáctanos</h3>
            <ul class="contact-list">
              <li><i class="mdi mdi-email-outline"></i> <a href="mailto:soporte@strokbig.com">soporte@strokbig.com</a></li>
              <li><i class="mdi mdi-phone-outline"></i> <a href="tel:+573001234567">+57 300 123 4567</a></li>
              <li><i class="mdi mdi-map-marker-outline"></i> <span>Medellín, Colombia</span></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>© 2025 Strokbig S.A.S - Todos los derechos reservados.</p>
        </div>
      </div>
    </footer>

    <script src="Script/Menu.js"></script>
    <script src="Script/pagos.js"></script>
</body>
</html>